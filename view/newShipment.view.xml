<mvc:View xmlns:cc="cc.control" xmlns:l="sap.ui.layout" xmlns:core="sap.ui.core" xmlns:sb="sb.control" xmlns:f="sap.ui.layout.form"
	xmlns:comm="sap.ui.commons" xmlns:mvc="sap.ui.core.mvc" xmlns="sap.m" controllerName="sb.controller.newShipment">
    <Panel class="sapUiMediumMarginBottom new-panel">
        <headerToolbar>
            <Toolbar design="Solid" class="dropdownToolbar">
                <Title text="Create New Shipment" titleStyle="H3"/>
                <ToolbarSpacer/>
                <Button icon="sap-icon://navigation-up-arrow" type="Transparent" press="toggleBox"/>
            </Toolbar>
        </headerToolbar>
        <content>
            <sb:div>
                <sb:div id="new-shipment-data">
                    <sb:div>
                        <f:Form
                            maxContainerCols="2"
                            editable="true">
                            <f:layout>
                                <f:ResponsiveGridLayout
                                    labelSpanL="4"
                                    labelSpanM="4"
                                    emptySpanL="2"
                                    emptySpanM="2"
                                    columnsL="2"
                                    columnsM="2" />
                            </f:layout>
                            <f:formContainers>
                                <f:FormContainer>
                                    <f:FormElement label="Ref no">
                                            <Input value="{NewShipment>/ShipmentNum}"/>
                                    </f:FormElement>
                                  </f:FormContainer>
                                  <f:FormContainer>
                                    <f:FormElement label="Shipping Point">
                                        <Input value="{NewShipment>/PlanningPoint}" showValueHelp="true" valueHelpRequest="shippingPointHelp"/>
                                    </f:FormElement>
                                </f:FormContainer>
                            </f:formContainers>
                        </f:Form>
                        <f:Form
                            maxContainerCols="2"
                            editable="true">
                            <f:layout>
                                <f:ResponsiveGridLayout
                                    labelSpanL="6"
                                    labelSpanM="6"
                                    columnsL="4"
                                    columnsM="4" />
                            </f:layout>
                            <f:formContainers>
                                <f:FormContainer>
                                    <f:FormElement label="Start date">
                                        <DatePicker displayFormat="dd/MM/yyyy" dateValue="{NewShipment>/StartDate}"/>
                                    </f:FormElement>
                                    <f:FormElement label="Start Time">
                                        <HBox>
                                            <TimePicker valueFormat="HH:mm" displayFormat="HH:mm" dateValue="{NewShipment>/StartTime}" change="setStartTime"/>
                                            <Button icon="sap-icon://history" press="calcStartTime"/>
                                        </HBox>
                                    </f:FormElement>
                                </f:FormContainer>
                                <f:FormContainer>
                                    <f:FormElement label="End Date">
                                        <DatePicker displayFormat="dd/MM/yyyy" dateValue="{NewShipment>/EndDate}"/>
                                    </f:FormElement>
                                    <f:FormElement label="End Time">
                                        <TimePicker valueFormat="HH:mm" displayFormat="HH:mm" dateValue="{NewShipment>/EndTime}"/>
                                    </f:FormElement>
                                </f:FormContainer>
                                <f:FormContainer>
                                    <f:FormElement label="Travel Time">
                                        <Input enabled="false" value="{NewShipment>/Time}"/>
                                    </f:FormElement>
                                    <f:FormElement label="Travel Distance">
                                        <Input enabled="false" value="{NewShipment>/Distance}"/>
                                    </f:FormElement>
                                </f:FormContainer>
                                <f:FormContainer>
                                    <f:FormElement label="Total Kg">
                                        <Input enabled="false" value="{NewShipment>/Kg}"/>
                                    </f:FormElement>
                                    <f:FormElement label="Total Vol">
                                        <Input enabled="false" value="{NewShipment>/Vol}"/>
                                    </f:FormElement>
                                </f:FormContainer>
                            </f:formContainers>
                        </f:Form>
                        <!--<l:Grid defaultSpan="XL3 L4 M4 S6">
                            <HBox>
                                <Text text="Start date" class="sapUiSmallMarginEnd"/>
                                <Label text="17.03.2016"/>
                            </HBox>
                            <HBox>
                                <Text text="End date" class="sapUiSmallMarginEnd"/>
                                <Label text="17.03.2016"/>
                            </HBox>
                            <HBox>
                                <Text text="Travel time" class="sapUiSmallMarginEnd"/>
                                <Label text="1.45"/>
                            </HBox>
                        </l:Grid>
                        <l:Grid defaultSpan="XL3 L4 M4 S6">
                            <HBox>
                                <Text text="Start time" class="sapUiSmallMarginEnd"/>
                                <Label text="09:00"/>
                            </HBox>
                            <HBox>
                                <Text text="End time" class="sapUiSmallMarginEnd"/>
                                <Label text="17:03"/>
                            </HBox>
                            <HBox>
                                <Text text="Travel distance" class="sapUiSmallMarginEnd"/>
                                <Label text="105"/>
                            </HBox>
                        </l:Grid>
                        <l:Grid defaultSpan="XL3 L4 M4 S6">
                            <HBox>
                                <Text text="Shipping Point" class="sapUiSmallMarginEnd"/>
                                <Label text="Wardle"/>
                            </HBox>
                        </l:Grid>-->
                    </sb:div>
                    <sb:dragDropTable change="reorder" dropFrom="fixed-orders,open-orders">
                        <Table rememberSelections="false" fixedLayout="false" class="sapUiSmallMarginTopBottom fixed-sort open-sort backload-sort" items="{NewShipment>/Orders}" showNoData="false" id="new-shipment">
                            <columns>
                                <Column>
                                    <Text text="Drop"/>
                                </Column>
                                <Column width="50px">
                                    <Text text="Cust"/>
                                </Column>
                                <Column>
                                    <Text text="Sold To PO"/>
                                </Column>
                                <Column>
                                    <Text text="Ship To"/>
                                </Column>
                                <Column>
                                    <Text text="Ship To PO"/>
                                </Column>
                                <Column>
                                    <Text text="Town"/>
                                </Column>
                                <Column>
                                    <Text text="Postcode"/>
                                </Column>
                                <Column>
                                    <Text text="Vol"/>
                                </Column>
                                <Column>
                                    <Text text="Kg"/>
                                </Column>
                                <Column>
                                    <Text text="Bkd date"/>
                                </Column>
                                <Column>
                                    <Text text="Bkd time"/>
                                </Column>
                                <Column>
                                    <Text text="Actual time"/>
                                </Column>
                                <Column>
                                    <Text text="Bkd Ref"/>
                                </Column>
                                <Column>
                                    <Text text="Distance"/>
                                </Column>
                                <Column>
                                    <Text text="Travel time"/>
                                </Column>
                                <Column>
                                    <Text text="Tip time"/>
                                </Column>
                                <Column>
                                </Column>
                            </columns>
                            <items>
                                <ColumnListItem press="calculateDistances" type="Active">
                                    <customData>
                                        <core:CustomData key="selected" value="{parts:[{path:'DistanceCalculated>/Postcode'},{path:'NewShipment>Order/Postcode'}],formatter:'.isSelected'}" writeToDom="true" />
                                    </customData>
                                    <Text text="{NewShipment>Drop}"/>
                                    <Text text="{NewShipment>Order/SoldTo}"/>
                                    <Link text="{NewShipment>Order/SoldToPO}" press="viewOrderDetails"/>
                                    <Text text="{NewShipment>Order/ShipToTo}"/>
                                    <Text text="{NewShipment>Order/ShipToPO}"/>
                                    <Text text="{NewShipment>Order/ShipToAddr/City}"/>
                                    <Text text="{NewShipment>Order/Postcode}"/>
                                    <Text text="{NewShipment>Order/Volume}"/>
                                    <Text text="{NewShipment>Order/Weight}"/>
                                    <Text text="{path:'NewShipment>Order/FixedDateTime',formatter:'.formatter.writeDate'}"/>
                                    <Text text="{path:'NewShipment>Order/FixedDateTime',formatter:'.formatter.writeTime'}"/>
                                    <Text text="{path:'NewShipment>ActualTime',formatter:'.formatter.writeTime'}"/>
                                    <Text text="{NewShipment>Order/CustRef}"/>
                                    <Text text="{NewShipment>Distance}"/>
                                    <Text text="{NewShipment>Time}"/>
                                    <Text text="{NewShipment>TipTime}"/>
                                    <core:Icon src="sap-icon://delete" press="remove"/>
                                </ColumnListItem>
                            </items>
                        </Table>
                    </sb:dragDropTable>
                    <Toolbar class="sb-button-toolbar">
                        <Button id="show-new-map" visible="false" text="View map" icon="sap-icon://map" type="Transparent" press="viewMap"/>
                        <ToolbarSpacer/>
                        <Button text="Cancel" press="cancel"/>
                        <Button text="Save" type="Emphasized" icon="sap-icon://save" press="save"/>
                    </Toolbar>
                    <sb:div id="new-map" class="sapUiSmallMarginTop" visible="false"/>
                 </sb:div>
            </sb:div>
        </content>
    </Panel>
</mvc:View>